From 5f00e7031ecf4a440c6f2a85c26c310865ef3fed Mon Sep 17 00:00:00 2001
From: Javad Rahimipetroudi <javad.rahimipetroudi@mind.be>
Date: Sun, 8 Dec 2024 16:07:26 +0100
Subject: [PATCH 8/8] update h616 dts for transpeed

Signed-off-by: Javad Rahimipetroudi <javad.rahimipetroudi@mind.be>
---
 .../arm64/boot/dts/allwinner/sun50i-h616.dtsi | 73 ++++++++++++++++++-
 1 file changed, 71 insertions(+), 2 deletions(-)

diff --git a/arch/arm64/boot/dts/allwinner/sun50i-h616.dtsi b/arch/arm64/boot/dts/allwinner/sun50i-h616.dtsi
index a44d1eff7a1f..bf109449be6e 100644
--- a/arch/arm64/boot/dts/allwinner/sun50i-h616.dtsi
+++ b/arch/arm64/boot/dts/allwinner/sun50i-h616.dtsi
@@ -253,11 +253,33 @@ i2c0_pins: i2c0-pins {
 				function = "i2c0";
 			};
 
+			i2c2_ph_pins: i2c2-ph-pins {
+				pins = "PH2", "PH3";
+				function = "i2c2";
+			};
+
 			i2c3_ph_pins: i2c3-ph-pins {
 				pins = "PH4", "PH5";
 				function = "i2c3";
 			};
 
+			i2c4_ph_pins: i2c4-ph-pins {
+				pins = "PH6", "PH7";
+				function = "i2c4";
+			};
+
+			/omit-if-no-ref/
+			i2c3_pg_pins: i2c3-pg-pins {
+				pins = "PG17", "PG18";
+				function = "i2c3";
+			};
+
+			/omit-if-no-ref/
+			i2c4_pg_pins: i2c4-pg-pins {
+				pins = "PG15", "PG16";
+				function = "i2c4";
+			};
+
 			ir_rx_pin: ir-rx-pin {
 				pins = "PH10";
 				function = "ir_rx";
@@ -291,10 +313,10 @@ mmc2_pins: mmc2-pins {
 
 			rmii_pins: rmii-pins {
 				pins = "PA0", "PA1", "PA2", "PA3", "PA4",
-					"PA5", "PA6", "PA7", "PA8", "PA9";
+				       "PA5", "PA6", "PA7", "PA8", "PA9";
 				function = "emac1";
 				drive-strength = <40>;
-                       };
+			};
 
 			/omit-if-no-ref/
 			spi0_pins: spi0-pins {
@@ -320,6 +342,12 @@ spi1_cs0_pin: spi1-cs0-pin {
 				function = "spi1";
 			};
 
+			/omit-if-no-ref/
+			spi1_cs1_pin: spi1-cs1-pin {
+				pins = "PH9";
+				function = "spi1";
+			};
+
 			spdif_tx_pin: spdif-tx-pin {
 				pins = "PH4";
 				function = "spdif";
@@ -330,6 +358,21 @@ uart0_ph_pins: uart0-ph-pins {
 				function = "uart0";
 			};
 
+			uart2_pins: uart2-pins {
+				pins = "PH5", "PH6";
+				function = "uart2";
+			};
+
+			uart2_rts_cts_pins: uart2-rts-cts-pins {
+				pins = "PH7", "PH8";
+				function = "uart2";
+			};
+
+			uart5_pins: uart5-pins {
+				pins = "PH2", "PH3";
+				function = "uart5";
+			};
+
 			/omit-if-no-ref/
 			uart1_pins: uart1-pins {
 				pins = "PG6", "PG7";
@@ -597,6 +640,8 @@ spi0: spi@5010000 {
 			dmas = <&dma 22>, <&dma 22>;
 			dma-names = "rx", "tx";
 			resets = <&ccu RST_BUS_SPI0>;
+			pinctrl-names = "default";
+			pinctrl-0 = <&spi0_pins>;
 			status = "disabled";
 			#address-cells = <1>;
 			#size-cells = <0>;
@@ -612,6 +657,8 @@ spi1: spi@5011000 {
 			dmas = <&dma 23>, <&dma 23>;
 			dma-names = "rx", "tx";
 			resets = <&ccu RST_BUS_SPI1>;
+			pinctrl-names = "default";
+			pinctrl-0 = <&spi1_pins>;
 			status = "disabled";
 			#address-cells = <1>;
 			#size-cells = <0>;
@@ -898,11 +945,14 @@ nmi_intc: interrupt-controller@7010320 {
 		r_pio: pinctrl@7022000 {
 			compatible = "allwinner,sun50i-h616-r-pinctrl";
 			reg = <0x07022000 0x400>;
+			interrupts = <GIC_SPI 143 IRQ_TYPE_LEVEL_HIGH>;
 			clocks = <&r_ccu CLK_R_APB1>, <&osc24M>,
 				 <&rtc CLK_OSC32K>;
 			clock-names = "apb", "hosc", "losc";
 			gpio-controller;
 			#gpio-cells = <3>;
+			interrupt-controller;
+			#interrupt-cells = <3>;
 
 			/omit-if-no-ref/
 			r_i2c_pins: r-i2c-pins {
@@ -961,6 +1011,25 @@ r_rsb: rsb@7083000 {
 			#address-cells = <1>;
 			#size-cells = <0>;
 		};
+
+		dump_reg: dump_reg@20000 {
+			compatible = "allwinner,sunxi-dump-reg";
+			reg = <0x0 0x03001000 0x0 0x0f20>;
+			status = "okay";
+		};
+
+		sunxi-info {
+			compatible = "allwinner,sun50i-h616-sys-info";
+			status = "okay";
+		};
+
+		addr_mgt: addr-mgt {
+			compatible = "allwinner,sunxi-addr_mgt";
+			type_addr_wifi = <0x2>;
+			type_addr_bt = <0x2>;
+			type_addr_eth = <0x2>;
+			status = "okay";
+		};
 	};
 
 	thermal-zones {
-- 
2.47.1

